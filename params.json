{"name":"Backbone.facetr","tagline":"A library to perform faceted search on Backbone collections","body":"\r\n# Backbone.Facetr\r\n\r\nVERSION 0.3.4\r\n\r\n### <a name=\"contents\"></a> CONTENTS\r\n\r\n* [INTRODUCTION](#introduction)\r\n* [INSTALLATION](#installation)\r\n* [BASIC USAGE](#basic-usage)\r\n* [DOT NOTATION](#dot-notation)\r\n* [API REFERENCE](#api-reference)\r\n* [EXAMPLES](#examples)\r\n* [LICENSE](#license)\r\n\r\n### <a name=\"introduction\"></a> INTRODUCTION\r\n\r\nBackbone.Facetr is an utility which enables filtering of Backbone collections through facets. It can be used to implement faceted search, which follows the\r\n[faceted classification system](http://en.wikipedia.org/wiki/Faceted_classification).\r\n\r\nIt works flawlessly up to 2500 items; computation starts getting slower with 5000 - 10000 items. This is however an \r\nearly version; optimizations may improve performance in future realeases.\r\n\r\nIf you decide to use Facetr in one of your projects, contact us at &#102;&#097;&#099;&#101;&#116;&#114;&#064;&#097;&#114;&#105;&#108;&#108;&#111;&#046;&#110;&#101;&#116;, we would be glad to add the link to your project in the [examples](#examples) section.\r\n\r\n\r\n### <a name=\"installation\"></a> INSTALLATION\r\n\r\n    <!DOCTYPE html>\r\n    <html>\r\n        ....\r\n\r\n        <!-- include Backbone.Facetr dependencies -->\r\n        <script src=\"js/lib/underscore.js\"></script>\r\n        <script src=\"js/lib/backbone.js\"></script>\r\n\r\n        <!-- include Backbone.Facetr code -->\r\n        <script src=\"js/code/backbone.facetr.js\"></script>\r\n        <!-- include your js code -->\r\n            <script> ..... </script>\r\n        </body>\r\n    </html>\r\n\r\n#### node.js\r\n\r\n    npm install backbone.facetr\r\n\r\n    // then in your code\r\n    var Facetr = require('backbone.facetr');\r\n\r\n### <a name=\"basic-usage\"></a> BASIC USAGE\r\n\r\n    // create a collection with few test items\r\n    var collection = new Backbone.Collection([\r\n        {\r\n            'Name'      : {\r\n                'FirstName' : 'Bob',\r\n                'LastName' : 'Smith'\r\n            },\r\n            'Age'       : 20,\r\n            'Country'   : 'Australia',\r\n            'Hobbies'   : ['fishing','painting','playing the ukulele'],\r\n            'Profession': 'manager'\r\n        },\r\n        {\r\n            'Name'      : {\r\n                'FirstName' : 'Otto',\r\n                'LastName'  : 'Von Braun'\r\n            },\r\n            'Age'       : 35,\r\n            'Country'   : 'New Zealand',\r\n            'Hobbies'   : ['drawing', 'painting', 'shopping'],\r\n            'Profession': 'team manager'\r\n        },\r\n        {\r\n            'Name'      : {\r\n                'FirstName' : 'Sarah',\r\n                'LastName'  : 'Smith'\r\n            },\r\n            'Age'       : 28,\r\n            'Country'   : 'Ireland',\r\n            'Hobbies'   : ['shopping','painting'],\r\n            'Profession': 'project manager'\r\n        }\r\n    ]);\r\n\r\n    Facetr(collection).facet('Name.LastName').value('Smith'); // collection contains 'Sarah Smith' and 'Bob Smith'\r\n    Facetr(collection).facet('Hobbies').value('shopping'); // contains only 'Sarah Smith' \r\n    Facetr(collection).facet('Name.LastName').removeValue('Smith'); // contains 'Sarah Smith' and 'Otto Von Braun'\r\n\r\n    // removes all facet values and restores original collection content\r\n    Facetr(collection).clearValues();\r\n\r\n    // if chaining is not your cup of tea, the following is equivalent to the above code\r\n    var facetCollection = Facetr(collection); // returns a FacetCollection object\r\n    var lastNameFacet = facetCollection.facet('Name.LastName'); // returns a Facet object\r\n    var hobbiesFacet = facetCollection.facet('Hobbies');\r\n\r\n    lastNameFacet.value('Smith'); // returns a FacetExp object\r\n    hobbiesFacet.value('shopping');\r\n    lastNameFacet.removeValue('Smith');\r\n\r\n    // read the API Reference section for more\r\n    // most examples will use the above collection reference to illustrate functionalities\r\n\r\n\r\n### <a name=\"dot-notation\"></a> DOT NOTATION\r\n\r\n    Syntax: PropertyName{1}(.PropertyName)*\r\n\r\nIn the context of Facetr, Dot Notation refers to the syntax used to define facets on a collection. Using the \r\nFacetr Dot Notation it is possible to define facets on properties of a Model, as well as on properties of its properties.\r\n\r\nFor example, consider the following model:\r\n\r\n    var model = new Backbone.Model({\r\n        'Name' : {\r\n            'FirstName' : 'John',\r\n            'LastName' : ['Smith','White']\r\n        },\r\n        'City' : 'London',\r\n        'Age' : 45,\r\n        'FamilyMembers' : [\r\n            { 'Name' : 'Robert' },\r\n            { 'Name' : 'Margaret' }\r\n        ]\r\n    });\r\n\r\nTo add a facet on property 'FirstName' the following expression in Dot Notation syntax can be used: 'Name.FirstName'.\r\n\r\n\r\n    Facetr(collection).facet('Name.FirstName');\r\n\r\n\r\nTheoretically there is no depth limit for a Dot Notation expression (e.g. PropertyName1.PropertyName2...PropertyNameN), the only \r\nlimitation being the common sense.\r\n\r\nA facet can only be added on a Backbone Model or object property having any of the following value types:\r\n \r\n* string | number | boolean\r\n* Array of strings\r\n* Array of numbers\r\n* Array of booleans\r\n* Array of objects\r\n* Array of Backbone models\r\n\r\nIt cannot be added on properties having the following value / composite types:\r\n\r\n* object\r\n* Backbone Collection\r\n* Array of arrays\r\n* Array of Backbone collections\r\n\r\n.. and in any other case not mentioned in the list of allowed value types\r\n\r\n\r\n#### EXAMPLE\r\n\r\n    Facetr(collection).facet('City');               // valid, City is a string\r\n    Facetr(collection).facet('Age');                // valid, Age is a Number\r\n    Facetr(collection).facet('Name.LastName');      // valid, LastName is an Array of strings\r\n    Facetr(collection).facet('FamilyMembers.Name'); // valid, takes value of Name of each object in array FamilyMembers\r\n    Facetr(collection).facet('Name');               // error, Name is an object\r\n\r\n    // etc..\r\n\r\n\r\n### <a name=\"api-reference\"></a> API Reference\r\n\r\n* [Facetr](#facetr)\r\n\r\n* [FacetCollection](#facetcollection)\r\n    * [facet](#facetcollection-facet)\r\n    * [toJSON](#facetcollection-tojson)\r\n    * [clear](#facetcollection-clear)\r\n    * [remove](#facetcollection-remove)\r\n    * [sortBy](#facetcollection-sortby)\r\n    * [asc](#facetcollection-asc)\r\n    * [desc](#facetcollection-desc)\r\n    * [addFilter](#facetcollection-addfilter)\r\n    * [removeFilter](#facetcollection-removefilter)\r\n    * [clearFilters](#facetcollection-clearfilters)\r\n    * [clearValues](#facetcollection-clearvalues)\r\n    * [facetsOrder](#facetcollection-facetsorder)\r\n    * [collection](#facetcollection-collection)\r\n    * [origLength](#facetcollection-origlength)\r\n    * [facets](#facetcollection-facets)\r\n    * [settingsJSON](#facetcollection-settingsjson)\r\n    * [initFromSettingsJSON](#facetcollection-initfromsettingsjson)\r\n\r\n* [Facet](#facet)\r\n    * [value](#facet-value)\r\n    * [removeValue](#facet-removevalue)\r\n    * [toJSON](#facet-tojson)\r\n    * [label](#facet-label)\r\n    * [sortByCount](#facet-sortbycount)\r\n    * [sortByActiveCount](#facet-sortbyactivecount)\r\n    * [sortByValue](#facet-sortbyvalue)\r\n    * [asc](#facet-asc)\r\n    * [desc](#facet-desc)\r\n    * [remove](#facet-remove)\r\n    * [clear](#facet-clear)\r\n    * [customData](#facet-customdata)\r\n    * [isSelected](#facet-isselected)\r\n    * [hierarchy](#facet-hierarchy)\r\n\r\n* [FacetExp](#facetexp)\r\n    * [and](#facetexp-and)\r\n    * [or](#facetexp-or)\r\n\r\n\r\n### <a name=\"facetr\"></a> Facetr\r\n    \r\n##### Facetr(collection:Backbone.Collection, [id:string]) : FacetCollection                     \r\n    \r\nInitialize a Collection to be used with Facetr. The first building block of\r\nany Facetr expression. Returns the created FacetCollection instance for\r\nmethod chaining. An id can be associated with the collection.\r\n    \r\nexample                                                                      \r\n                                                                              \r\n    Facetr(collection);\r\n\r\n    // or also\r\n    Facetr(collection, 'myCollection');\r\n    \r\n    // which enables the following syntax\r\n    Facetr('myCollection') === Facetr(collection); // true                                                      \r\n    \r\n\r\n### <a name=\"facetcollection\"></a> FacetCollection\r\n\r\n\r\n##### <a name=\"facetcollection-facet\"></a> facet(dotNotationExpr:string, [operator:string], [silent:boolean]) : Facet\r\n\r\nAdds a Facet on the given collection using the property refered to by the\r\nDot Notation expression (see [Dot Notation section](#dot-notation) for more details).\r\nValid operator values are: 'or' and 'and' (anything else will default to 'and').\r\nReturns the created Facet instance to allow method chaining.\r\nTriggers a facet event with the facetName passed to the callback, unless true is passed as last parameter.\r\n\r\nexample\r\n\r\n    Facetr(collection).on('facet', function(facetName) {\r\n        console.log(facetName);\r\n    });\r\n\r\n    // add facet on property 'Age' using default operator ('and')\r\n    Facetr(collection).facet('Age');\r\n\r\n    // add facet on property 'LastName' of object 'Name' using 'or' operator\r\n    Facetr(collection).facet('Name.LastName', 'or');\r\n\r\n    // console output would be\r\n    // Age\r\n    // Name.LastName\r\n\r\n\r\n##### <a name=\"facetcollection-tojson\"></a> toJSON() : Array\r\n\r\nReturns an array containing objects representing the status of the facets\r\nadded to the collection. Useful for rendering out facets lists.\r\nEach object in the array is the result of invoking toJSON on each Facet\r\n(see Facet documentation below for the Facet.toJSON method).\r\n\r\nexample\r\n\r\n    // create a collection with two models\r\n    var collection = new Backbone.Collection([\r\n        {\r\n            'Name'      : {\r\n                'FirstName' : 'Bob',\r\n                'LastName' : 'Smith'\r\n            },\r\n            'Age'       : 20\r\n        },\r\n        {\r\n            'Name'      : {\r\n                'FirstName' : 'Otto',\r\n                'LastName'  : 'Von Braun'\r\n            },\r\n            'Age'       : 35\r\n        }\r\n    ]);\r\n\r\n    Facetr(collection).facet('Name.FirstName').label('First Name');\r\n    Facetr(collection).facet('Name.FirstName').value('Bob');\r\n\r\n    var json = Facetr(collection).toJSON();\r\n\r\n    // value of json will be an array of Facet data object with the following format:\r\n    //\r\n    // [\r\n    //      {\r\n    //          data : {\r\n    //              extOperator : 'and',\r\n    //              intOperator : 'or',\r\n    //              label       : 'First Name',\r\n    //              name        : 'Name.FirstName',\r\n    //              selected    : true,\r\n    //              sort        : {\r\n    //                  by        : 'value',\r\n    //                  direction : 'asc'\r\n    //              }\r\n    //              customData : {}\r\n    //          },\r\n    //          values : [\r\n    //              {\r\n    //                  active      : true,\r\n    //                  activeCount : 1,\r\n    //                  count       : 1,\r\n    //                  value       : 'Bob'\r\n    //              },\r\n    //              {\r\n    //                  active      : false,\r\n    //                  activeCount : 0,\r\n    //                  count       : 1,\r\n    //                  value       : 'Otto'\r\n    //              }\r\n    //          ]\r\n    //      }\r\n    // ]\r\n\r\n\r\n##### <a name=\"facetcollection-clear\"></a> clear([silent:boolean]) : FacetCollection\r\n\r\nRemoves all the facets added to the collection and unfilters it accordingly.\r\nUse this method to reset the original models in the collection.\r\nTriggers a clear event, unless true is passed as parameter.\r\n\r\nexample\r\n\r\n    Facet(collection).on('clear', function() {\r\n        console.log('All facets were removed');\r\n    });\r\n\r\n    Facet(collection).clear();\r\n\r\n    // console output\r\n    All facets were removed\r\n\r\n\r\n##### <a name=\"facetcollection-remove\"></a> remove() : undefined\r\n\r\nRemoves all the facets and the facetrid added on the collection id upon\r\nFacetr(collection) initialization. Resets the original items in the\r\ncollection.\r\n\r\nexample\r\n\r\n    Facetr(collection).remove()\r\n\r\n\r\n##### <a name=\"facetcollection-sortby\"></a> sortBy(attribute:string, [silent]) : FacetCollection\r\n\r\nSorts the collection according to the given attribute name. By default\r\nascendent sort is used. See asc() and desc() methods below to define sort\r\ndirection. Triggers sort event unless true is passed as last parameter.\r\nThis method automatically recognizes string, numeric or date values.\r\n\r\nexample\r\n\r\n    Facetr(collection).on('sort', function(attr, dir) {\r\n        console.log('Sorting by ' + attr + ' ' + dir);\r\n    });\r\n\r\n    Facetr(collection).sortBy('Age');\r\n\r\n    // console output\r\n    Sorting by Age asc\r\n\r\n\r\n##### <a name=\"facetcollection-asc\"></a> asc([silent:boolean]) : FacetCollection\r\n\r\nSorts the collection in ascendent order by the attribute selected using\r\nsortBy method.\r\nIf sortBy was not invoked before, this method has no effect. Triggers sort\r\nevent unless true is passed as parameter.\r\n\r\nexample\r\n\r\n    Facetr(collection).sortBy('Age').asc();\r\n\r\n\r\n##### <a name=\"facetcollection-desc\"></a> desc([silent:boolean]) : FacetCollection\r\n\r\nSorts the collection in descendent order by the attribute selected using\r\nsortBy method.\r\nIf sortBy was not invoked before, this method has no effect. Triggers sort\r\nevent unless true is passed as parameter.\r\n\r\nexample\r\n\r\n    Facetr(collection).sortBy('Age').desc();\r\n\r\n\r\n##### <a name=\"facetcollection-addfilter\"></a> addFilter(filterName:string, filter:function, [silent:boolean]) : FacetCollection\r\n\r\nAdds a filter which is used to filter the collection by testing each model against it. \r\nTriggers Backbone.Collection reset unless true is passed as last parameter. Multiple filters can be added as long as they have\r\ndifferent names. Adding two filters with the same name will result in the first being overwritten by the second.\r\n\r\nexample\r\n\r\n    Facetr(collection).addFilter('AgeFilter', function(model) {\r\n        return model.get('Age') >= 20 && model.get('Age') < 60; \r\n    });\r\n\r\n\r\n##### <a name=\"facetcollection-removefilter\"></a> removeFilter(filterName:string, [silent:boolean]) : FacetCollection\r\n\r\nRemoves the filter with the given name from the collection and unfilters it accordingly. \r\nTriggers reset unless true is passed as last parameter.\r\n\r\nexample\r\n\r\n    Facetr(collection).removeFilter('AgeFilter');\r\n    \r\n\r\n##### <a name=\"facetcollection-clearfilters\"></a> clearFilters([silent:boolean]) : FacetCollection\r\n\r\nRemoves all the filters previously added to the collection and unfilters it accordingly. \r\nTriggers reset unless true is passed as parameter.\r\n\r\nexample\r\n\r\n    Facetr(collection).clearFilters();\r\n\r\n\r\n##### <a name=\"facetcollection-clearvalues\"></a> clearValues([silent:boolean]) : FacetCollection\r\n\r\nRemoves all the currently selected values from all the facets, bringing\r\nthe collection to its initial state.\r\nTriggers a clearValues event unless true is passed as parameter.\r\n\r\nexample\r\n\r\n    Facetr(collection).clearValues();\r\n\r\n\r\n##### <a name=\"facetcollection-facetsorder\"></a> facetsOrder(facetNames:Array, [silent:boolean]) : FacetCollection\r\n\r\nSometimes it is convinient to give the facets list a predefined order. This method\r\ncan be used to achieve this by passing an array of facet names which corresponds to\r\nthe order to be given to the facets in the list. Triggers a 'facetsOrder' event with the facetNames array passed\r\nto the event handler, unless true is given as last parameter.\r\n\r\nexample\r\n\r\n    Facetr(collection).facet('Age');\r\n    Facetr(collection).facet('Name.FirstName');\r\n\r\n    // Facetr(collection).toJSON() has facet 'Age' at index 0 and 'Name.FirstName' at index 1\r\n\r\n    Facetr(collection).facetsOrder(['Name.FirstName', 'Age']);\r\n\r\n    // Facetr(collection).toJSON() has facet 'Name.FirstName' at index 0 and 'Age' at index 1\r\n\r\n\r\n##### <a name=\"facetcollection-collection\"></a> collection() : Backbone.Collection\r\n\r\nReturns the reference to the Backbone.Collection. Useful for cases where the reference\r\nis needed but it was declared in another scope and is no more accessible.\r\n\r\nexample\r\n\r\n    Facetr(collection).collection() === collection; // true\r\n\r\n##### <a name=\"facetcollection-origlength\"></a> origLength() : Number\r\n\r\nReturns the length of the collection before any faceted filtering was applied.\r\n\r\nexample\r\n\r\n    var collection = new Backbone.Collection([\r\n        {\r\n            Name : 'John'\r\n            Age  : 19\r\n        },\r\n        {\r\n            Name : 'Sarah',\r\n            Age  : 35\r\n        }\r\n    ]);\r\n\r\n    collection.length() // 2\r\n\r\n    Facetr(collection).facet('Age').value(35);\r\n\r\n    collection.length(); // 1\r\n    Facetr(collection).origLength(); // 2\r\n\r\n##### <a name=\"facetcollection-facets\"></a> facets() : Array\r\n\r\nReturns an array containing all the Facet instances created on this FacetCollection.\r\n\r\n##### <a name=\"facetcollection-settingsjson\"></a> settingsJSON() : object\r\n\r\nReturns an object representation of the current state of the Facetr collection which\r\ncan be used to reload the same state in future using the initFromSettingsJSON method.\r\n\r\nexample\r\n    \r\n    Facetr(collection).facet('Name.FirstName').label('First Name');\r\n    Facetr(collection).sortBy('Name.FirstName').asc();\r\n    Facetr(collection).facet('Name.FirstName').value('Bob');\r\n\r\n    var json = Facetr(collection).settingsJSON();\r\n\r\n    // value of json will be the following:\r\n    //  \r\n    // {\r\n    //      sort : {\r\n    //          by  :   \"Name.FirstName\",\r\n    //          dir :   \"asc\"\r\n    //      },\r\n    //      facets : [\r\n    //          {\r\n    //              attr    :   \"Name.FirstName\",\r\n    //              eop     :   \"and\",\r\n    //              iop     :   \"or\",\r\n    //              vals    :   [ \"Bob\" ]\r\n    //          }\r\n    //      ]\r\n    //  }\r\n\r\n##### <a name=\"facetcollection-initfromsettingsjson\"></a> initFromSettingsJSON(json:object) : FacetCollection\r\n\r\nInitializes the Facetr collection using a settings object generated\r\nusing the settingsJSON method. Triggers an \"initFromSettingsJSON\" event.\r\n\r\n\r\n### <a name=\"facet\"></a> Facet\r\n\r\n##### <a name=\"facet-value\"></a> value(value:string, [operator:string], [silent:boolean]) : FacetExp\r\n\r\nAdds a value to the facet. This will result in the collection being filtered\r\nby { FacetName : 'Value' }. An operator ('and' or 'or') can be passed to change\r\nthe internal logical operator of the facet.\r\nTriggers a 'filter' event on the FacetCollection passing facetName and facetValue to the handler and \r\na 'value' event on the Facet passing the facetValue to the handler, unless true is passed\r\nas last parameter.\r\n\r\nexample\r\n    \r\n    Facetr(collection).on('filter', function(facetName, facetValue) {\r\n        console.log('filtered by '+ facetName + ' with value equal ' + facetValue);\r\n    });\r\n\r\n    var facet = Facetr(collection).facet('Name.FirstName');\r\n\r\n    facet.on('value', function(facetValue){\r\n        console.log('the following value was added to the facet: ' + facetValue);\r\n    });\r\n\r\n    facet.value('Bob');\r\n\r\n    // console output: \"filtered by Name.FirstName with value Bob\"\r\n    // collection contains only models with FirstName = 'Bob'\r\n\r\n##### <a name=\"facet-removevalue\"></a> removeValue(value:string, [silent:boolean]) : FacetExp\r\n\r\nRemoves the given value from the facet and resets the collection to\r\nthe state previous of the filtering caused by the removed value.\r\nTriggers a 'unfilter' event on the FacetCollection passing facetName and facetValue to the handler and \r\na 'removeValue' event on the Facet passing the facetValue to the handler, unless true is passed\r\nas last parameter.\r\n\r\nexample\r\n    \r\n    Facetr(collection).on('unfilter', function(facetName, facetValue) {\r\n        console.log('unfiltered by '+ facetName + ' with value equal ' + facetValue);\r\n    });\r\n\r\n    var facet = Facetr(collection).facet('Name.FirstName');\r\n\r\n    facet.on('removeValue', function(value){\r\n        console.log('the following value was removed from the facet: ' + value);\r\n    });\r\n\r\n    facet.removeValue('Bob');\r\n\r\n    // console output: \"unfiltered by Name.FirstName with value Bob\"\r\n    // collection contains again also models with FirstName = 'Bob'\r\n\r\n##### <a name=\"facet-tojson\"></a> toJSON() : object\r\n\r\nReturns an object representation of the current facet data and values.\r\nUseful for rendering the facet to the page.\r\n\r\nexample\r\n\r\n    // create a collection with two models\r\n    var collection = new Backbone.Collection([\r\n        {\r\n            'Name'      : {\r\n                'FirstName' : 'Bob',\r\n                'LastName' : 'Smith'\r\n            },\r\n            'Age'       : 20\r\n        },\r\n        {\r\n            'Name'      : {\r\n                'FirstName' : 'Otto',\r\n                'LastName'  : 'Von Braun'\r\n            },\r\n            'Age'       : 35\r\n        }\r\n    ]);\r\n\r\n    Facetr(collection).facet('Name.FirstName').label('First Name');\r\n    Facetr(collection).facet('Name.FirstName').value('Bob');\r\n\r\n    var json = Facetr(collection).facet('Name.FirstName').toJSON();\r\n\r\n    // json is equal to:\r\n    //\r\n    //  {\r\n    //      data : {\r\n    //          extOperator : 'and',\r\n    //          intOperator : 'or',\r\n    //          label       : 'First Name',\r\n    //          name        : 'Name.FirstName',\r\n    //          selected    : true,\r\n    //          sort        : {\r\n    //              by        : 'value',\r\n    //              direction : 'asc'\r\n    //          }\r\n    //          customData : {}\r\n    //      },\r\n    //      values : [\r\n    //          {\r\n    //              active      : true,\r\n    //              activeCount : 1,\r\n    //              count       : 1,\r\n    //              value       : 'Bob'\r\n    //          },\r\n    //          {\r\n    //              active      : false,\r\n    //              activeCount : 0,\r\n    //              count       : 1,\r\n    //              value       : 'Otto'\r\n    //          }\r\n    //      ]\r\n    //  }\r\n\r\n##### <a name=\"facet-label\"></a> label(label:string) : Facet\r\n\r\nUse this method to set a human readable label for the facet.\r\nThis can be used when rendering the facet on the page.\r\n\r\nexample:\r\n    \r\n    Facetr(collection).facet('Name.FirstName').label('First Name');\r\n\r\n    Facetr(collection).facet('Name.FirstName').toJSON();\r\n\r\n    // the property data.label has value 'First Name'\r\n    // while the property data.name stays 'Name.FirstName'\r\n\r\n##### <a name=\"facet-sortbycount\"></a> sortByCount() : Facet\r\n\r\nSorts the facet values by their count. The count is the number \r\nof models in the original collection with an attribute having as name \r\nthe facet name and value the given value.\r\n\r\nexample\r\n\r\n    // we use the colleciton defined in Basic Usage section\r\n    var facet = Facetr(collection).facet('Hobbies');\r\n    \r\n    facet.value('painting'); // painting count = 3  \r\n    facet.value('drawing');  // drawing count = 1\r\n\r\n    // facet.toJSON().data.values[0] = 'drawing'\r\n    // facet.toJSON().data.values[1] = 'painting'\r\n\r\n    facet.sortByCount();\r\n\r\n    // facet.toJSON().data.values[0] = 'painting'\r\n    // facet.toJSON().data.values[1] = 'drawing'\r\n\r\n##### <a name=\"facet-sortbyactivecount\"></a> sortByActiveCount() : Facet\r\n\r\nSorts the facet values by their active count. The active count is the number\r\nof models in the current filtered collection with an attribute having as name\r\nthe facet name and value the given value.\r\n\r\nexample\r\n\r\n    var facet = Facetr(collection).facet('Hobbies');\r\n    \r\n    facet.value('fishing');   \r\n    facet.value('shopping');  \r\n\r\n    // fishing active count = 1\r\n    // shopping active count = 2\r\n\r\n    // facet.toJSON().data.values[0] = 'fishing'\r\n    // facet.toJSON().data.values[1] = 'shopping'\r\n\r\n    facet.sortByActiveCount();\r\n\r\n    // facet.toJSON().data.values[0] = 'shopping'\r\n    // facet.toJSON().data.values[1] = 'fishing' \r\n\r\n##### <a name=\"facet-sortbyvalue\"></a> sortByValue() : Facet\r\n\r\nSorts the facet values by their value. This is the default sort.\r\n\r\n##### <a name=\"facet-asc\"></a> asc() : Facet\r\n\r\nSets the direction of the values sort to ascendent.\r\n\r\nexample\r\n\r\n    Facetr(collection).facet('Name.FirstName').asc();\r\n\r\n##### <a name=\"facet-desc\"></a> desc() : Facet\r\n\r\nSets the direction of the values sort to descendant.\r\n\r\nexample\r\n\r\n    Facetr(collection).facet('Name.FirstName').sortByCount().desc();\r\n\r\n##### <a name=\"facet-remove\"></a> remove() : undefined\r\n\r\nRemoves the facet and all its values and unfilters the collection accordingly.\r\n\r\n##### <a name=\"facet-clear\"></a> clear([silent:boolean]) : Facet\r\n\r\nUnselects all the values from the facet. It triggers a 'clear' event unless true is passed as parameter.\r\n\r\n##### <a name=\"facet-customdata\"></a> customData(key:string, [value:object]) : Facet\r\n\r\nThis method can be used to add arbitrary data to pass to the templates.\r\nData added using this method is included in the object returned by the toJSON() method\r\nin the data.customData property.\r\nTo retrieve previously set data, just pass the key parameter without any value.\r\n\r\nexample\r\n\r\n    var facet = Facetr('myCollection').facet('Hobbies').customData('sublabel', 'Available hobbies');\r\n\r\n    // facet.customData('sublabel') returns 'Available hobbies'\r\n    // facet.toJSON().data.customData = { sublabel : 'Available hobbies' }\r\n\r\n##### <a name=\"facet-isselected\"></a> isSelected : Boolean\r\n\r\nReturns true if any value is selected from this facet, false otherwise.\r\n\r\nexample\r\n\r\n    var facet = Facetr('myCollection').facet('Hobbies');\r\n\r\n    facet.value('fishing');\r\n\r\n    // facet.isSelected() returns true\r\n\r\n    facet.clear(); // remove all selected values\r\n\r\n    // facet.isSelected() returns false\r\n\r\n##### <a name=\"facet-hierarchy\"></a> hierarchy(hierarchySettings:Array) : Facet\r\n\r\nThis method creates a hierarchical representation of facet values, based on the settings\r\nobject given as parameter. Once this method is used, the facet becomes a \"hierarchical\" facet.\r\nYou can then use the facet as you usually would, with the following differences:\r\n\r\n* the data section of the object resulting from invoking the toJSON method will also\r\n  contain a \"hierarchical\" property with value true and a \"groupedValues\" array, with the following format:\r\n\r\ngroupedValues\r\n\r\n    [\r\n        {\r\n            value: \"manager\",\r\n            label: \"Manager\",\r\n            active: false,\r\n            activeCount: 7,\r\n            count: 7,\r\n            groups: [\r\n                {\r\n                    value: \"team manager\",\r\n                    label: \"Team Manager\",\r\n                    active: false,\r\n                    activeCount: 5,\r\n                    count: 5,\r\n                    groups: [\r\n                        { ... other groups values ... }\r\n                    ]\r\n                },\r\n                 {\r\n                    value: \"manager\",\r\n                    label: \"Manager\",\r\n                    active: false,\r\n                    activeCount: 5,\r\n                    count: 5 // no groups property means that this value has no children groups\r\n                },\r\n            ]\r\n        }\r\n    ]\r\n\r\n* when a value from the facet is selected, also the models resulting from selecting its descendents values are\r\n  included in the result set\r\n\r\n* the count includes both the count of the value itself and that of its descendants values\r\n\r\nThe hierarchySettings argument is an array with different \"hierarchical value\" objects, where it is possible\r\nto specify the hierarchy of values along with a label. See the example below to understand the hierarchySettings format.\r\n\r\nexample\r\n\r\n    var hierarchySettings = [\r\n        {               \r\n            value: \"manager\",\r\n            label: \"Manager\",\r\n            groups: [\r\n                {\r\n                    value: \"project manager\",\r\n                    label: \"Project Manager\",\r\n                    groups: [\r\n                        {\r\n                            value: \"team manager\",\r\n                            label: \"Team Manager\"\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    ];\r\n\r\n    var profession = Facetr(collection).facet('Profession').hierarchy(hierarchySettings);\r\n\r\n    var json = profession.toJSON();\r\n\r\n    // value of json variable would be:\r\n    //\r\n    // {\r\n    //  \"data\": {\r\n    //      \"name\":\"Profession\",\r\n    //      \"hierarchical\":true,\r\n    //      \"label\":\"Profession\",\r\n    //      \"extOperator\":\"and\",\r\n    //      \"intOperator\":\"or\",\r\n    //      \"sort\":{\r\n    //          \"by\":\"activeCount\",\r\n    //          \"direction\":\"desc\"\r\n    //      },\r\n    //      \"selected\":false,\r\n    //      \"customData\":{}\r\n    //  },\r\n    //  \"values\": [ ... stays as the normal facets ... ],\r\n    //  \"groupedValues\":[\r\n    //      {\r\n    //          \"value\":\"manager\",\r\n    //          \"label\":\"Manager\",\r\n    //          \"active\":false,\r\n    //          \"activeCount\":3,\r\n    //          \"count\":3,\r\n    //          \"groups\":[\r\n    //              {\r\n    //                  \"value\":\"project manager\",\r\n    //                  \"label\":\"Project Manager\",\r\n    //                  \"active\":false,\r\n    //                  \"activeCount\":2,\r\n    //                  \"count\":2,\r\n    //                  \"groups\":[\r\n    //                      {\r\n    //                          \"value\":\"team manager\",\r\n    //                          \"label\":\"Team Manager\",\r\n    //                          \"active\":false,\r\n    //                          \"activeCount\":1,\r\n    //                          \"count\":1\r\n    //                      }\r\n    //                  ]\r\n    //              }\r\n    //          ]\r\n    //      }\r\n    //  ]\r\n    // }\r\n\r\n### <a name=\"facetexp\"></a> FacetExp\r\n\r\nFacetExp objects are returned from Facet value and removeValue methods.\r\nThey can be used to coincisely define multiple values on a facet, using\r\ndifferent operators.\r\n\r\nexample\r\n\r\n    Facetr(collection).facet('Age').value(12, 'and');\r\n    Facetr(collection).facet('Age').value(15, 'or');\r\n    Facetr(collection).facet('Age').value(39, 'and');\r\n\r\n    // can also be expressed with the following syntax\r\n\r\n    Facetr(collection).facet('Age').value(12, 'and').or(15).and(39);\r\n\r\n##### <a name=\"facetexp-and\"></a> and(value:string, [silent:boolean]) : Facet\r\n\r\nEquivalent to facet.value('Value', 'and'), but can be used for FacetExp chains.\r\n\r\n##### <a name=\"facetexp-or\"></a> or(value:string, [silent:boolean]) : Facet\r\n\r\nEquivalent to facet.value('Value', 'or'), but can be used for FacetExp chains.\r\n\r\n\r\n### <a name=\"examples\"></a> EXAMPLES\r\n\r\nThis section contains a list of websites / projects using Facetr.\r\n\r\n* [terra-vecchia.ch](http://terra-vecchia.ch/sozialtherapie/angebote-und-betriebe)\r\n* [grimselhydro.ch](http://grimselhydro.ch/referenzen)\r\n* [redbullalpenbrevet.ch](http://www.redbullalpenbrevet.ch/helden)\r\n\r\n### <a name=\"license\"></a> LICENSE\r\n\r\nBackbone.Facetr may be freely distributed under the MIT license.\r\n\r\nCopyright (C) 2012-2013 Arillo GmbH http://arillo.net\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \r\nof the Software, and to permit persons to whom the Software is furnished to do so, \r\nsubject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies\r\nor substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, \r\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR \r\nPURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE\r\nFOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR \r\nOTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER \r\nDEALINGS IN THE SOFTWARE.\r\n","google":"UA-39794666-1","note":"Don't delete this file! It's used internally to help with page regeneration."}